<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Bluflix - Odtwarzacz</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicon-32x32.png" type="image/png">
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
</head>
<body>

<header>
    <h1>Bluflix - Oglądaj Film</h1>
</header>

<div id="player-container">
    <div class="plyr__video-embed" id="player">
        <!-- UWAGA: tutaj NIE UŻYWAMY src od razu -->
        <iframe allowfullscreen allowtransparency allow="autoplay"></iframe>
    </div>
</div>

<script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
<script>
    const urlParams = new URLSearchParams(window.location.search);
    const videoId = urlParams.get('id');

    if (videoId) {
        const playerContainer = document.getElementById('player');
        const iframe = playerContainer.querySelector('iframe');

        // ustaw odpowiednie atrybuty dla Plyr
        iframe.setAttribute('src', `https://www.youtube.com/embed/${videoId}?origin=${window.location.origin}&iv_load_policy=3&modestbranding=1&rel=0`);
        iframe.setAttribute('data-plyr-provider', 'youtube');
        iframe.setAttribute('data-plyr-embed-id', videoId);

        const player = new Plyr('#player', {
            youtube: {
                noCookie: true
            }
        });
    } else {
        alert('Nie podano ID filmu!');
    }
</script>

</body>
</html>
